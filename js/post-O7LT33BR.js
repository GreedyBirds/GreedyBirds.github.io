import{a as J,d as se}from"./chunk-3H3HTRMP.js";import{A as me,D as $,E as Y,F as he,G as A,H as W,I as te,J as P,M as I,N as fe,P as g,U as ge,a as Q,c as ce,j as m,k as ue,p as de,s as ee,t as ve,v as O,w as pe,x as _}from"./chunk-6YTDSMGG.js";import{b as le,e as ie,f as re,g as K,h as U}from"./chunk-V4OBHMA3.js";import{a as ae,g as G}from"./chunk-TPVZXENC.js";import"./chunk-HPRUMQZB.js";import{a as D}from"./chunk-L4ZEUURY.js";import"./chunk-WIQECBEN.js";D();D();D();function Ae(o,t,e){var n=e||{},l=n.noTrailing,v=l===void 0?!1:l,h=n.noLeading,r=h===void 0?!1:h,L=n.debounceMode,i=L===void 0?void 0:L,c,d=!1,p=0;function y(){c&&clearTimeout(c)}function T(S){var f=S||{},b=f.upcomingOnly,w=b===void 0?!1:b;y(),d=!w}function C(){for(var S=arguments.length,f=new Array(S),b=0;b<S;b++)f[b]=arguments[b];var w=this,k=Date.now()-p;if(d)return;function M(){p=Date.now(),t.apply(w,f)}function q(){c=void 0}!r&&i&&!c&&M(),y(),i===void 0&&k>o?r?(p=Date.now(),v||(c=setTimeout(i?q:M,o))):M():v!==!0&&(c=setTimeout(i?q:M,i===void 0?o-k:o))}return C.cancel=T,C}function Ce(o,t={}){let e=m(null),n=null,l=()=>{if(!o.value)return;let r=o.value.getBoundingClientRect();e.value=r,t.onChange?.(r)},v=t.throttle?Ae(t.throttleDelay??100,l,{noTrailing:!1}):l,h=()=>{n?.disconnect(),n=null};return O(()=>{if(o.value&&(l(),typeof ResizeObserver<"u"&&(n=new ResizeObserver(v),n.observe(o.value)),o.value.tagName==="IMG")){let r=o.value;r.complete||r.addEventListener("load",l,{once:!0})}}),_(h),$(()=>{if(h(),!!o.value){if(l(),typeof ResizeObserver<"u"&&(n=new ResizeObserver(v),n.observe(o.value)),o.value.tagName==="IMG"){let r=o.value;r.complete||r.addEventListener("load",l,{once:!0})}de(h)}}),{rect:e}}function ye(o,t){let e=t[0]-o[0],n=t[1]-o[1];return Math.hypot(e,n)}function we(o){if(!o.value)return[0,0];let t=window.getComputedStyle(o.value).transform;if(t==="none")return[0,0];let e=t.match(/matrix\((.+)\)/);if(!e)return[0,0];let n=e[1].split(", ");return[Number.parseFloat(n[4])||0,Number.parseFloat(n[5])||0]}function V(o){typeof o>"u"||typeof o.preventDefault!="function"||o.preventDefault()}function Ne(o,t){Object.assign(o.style,t)}function He(o){let{handleWheel:t,handleTouchStart:e,handleKeyDown:n}=o;function l(v){if(!(typeof window>"u"))switch(v){case"on":window.addEventListener("wheel",V,{passive:!1}),window.addEventListener("touchmove",V,{passive:!1}),window.addEventListener("wheel",t),window.addEventListener("touchstart",e),window.addEventListener("keydown",n);break;case"off":window.removeEventListener("wheel",V),window.removeEventListener("touchmove",V),window.removeEventListener("wheel",t),window.removeEventListener("touchstart",e),window.removeEventListener("keydown",n);break}}return{toggleEventListener:l}}function ze(o,t){let{zoomStep:e,zoomMax:n,zoomMin:l,dblClickZoomTo:v}=t,h=m(!1),r=m(0),L=m(0),i=m(1),c=0,d=0,p=0,y=0,T=0;$(()=>{o.value&&(o.value.style.cursor=h.value?"grabbing":"grab")});let C=g(()=>{let s=r.value===0?"-50%":`${r.value}px`,u=L.value===0?"-50%":`${L.value}px`;return`translate(${s}, ${u}) scale(${i.value})`}),S=()=>{o.value&&Ne(o.value,{transform:C.value})},f=(s=0,u)=>{u!==void 0?i.value=u:i.value+=s,i.value=Math.max(l,Math.min(n,i.value)),S()},b=s=>{f(s.deltaY<0?e:-e)},w=()=>{f(0,i.value>1?1:v)},k=s=>{if(o.value){if(s.touches.length===2){let[u,E]=[s.touches[0],s.touches[1]],z=ye([u.pageX,u.pageY],[E.pageX,E.pageY]),j=z/c;f(0,i.value*j),c=z}else if(s.touches.length===1){let u=s.touches[0],E=u.pageX-d,z=u.pageY-p;r.value=y+E,L.value=T+z,S()}}},M=()=>{document.removeEventListener("touchmove",k),document.removeEventListener("touchend",M)},q=s=>{if(o.value){if(s.touches.length===2){let[u,E]=[s.touches[0],s.touches[1]];c=ye([u.pageX,u.pageY],[E.pageX,E.pageY])}else if(s.touches.length===1){let u=s.touches[0];d=u.pageX,p=u.pageY;let E=we(o);y=E[0],T=E[1]}document.addEventListener("touchmove",k),document.addEventListener("touchend",M)}},B=s=>{if(!o.value)return;let u=s.clientX-d,E=s.clientY-p;r.value=y+u,L.value=T+E,S()},N=()=>{h.value=!1,document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",N)},H=s=>{if(!o.value)return;h.value=!0,d=s.clientX,p=s.clientY;let u=we(o);y=u[0],T=u[1],document.addEventListener("mousemove",B),document.addEventListener("mouseup",N)},X=()=>{r.value=0,L.value=0,i.value=1},Z=()=>{document.removeEventListener("wheel",b),document.removeEventListener("touchstart",q),document.removeEventListener("touchmove",k),document.removeEventListener("touchend",M),document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",N)};return _(Z),{handleWheel:b,handleTouchStart:q,handleDblclick:w,handleMouseDown:H,initTransformer:X,cleanupListeners:Z}}function De(){let o=m(typeof window<"u"?window.innerWidth:0),t=m(typeof window<"u"?window.innerHeight:0),e=m(typeof window<"u"?window.scrollX:0),n=m(typeof window<"u"?window.scrollY:0),l=()=>{typeof window>"u"||(o.value=window.innerWidth,t.value=window.innerHeight)},v=()=>{typeof window>"u"||(e.value=window.scrollX||window.pageXOffset,n.value=window.scrollY||window.pageYOffset)};return O(()=>{l(),v(),window.addEventListener("resize",l,{passive:!0}),window.addEventListener("scroll",v,{passive:!0})}),_(()=>{typeof window>"u"||(window.removeEventListener("resize",l),window.removeEventListener("scroll",v))}),{width:o,height:t,scrollX:e,scrollY:n}}var x={duration:500,maskBgColor:"black",maskOpacity:.1,previewZIndex:1e3,previewMaxWidth:"80vw",previewMaxHeight:"80vh",zoomStep:.2,zoomMin:.2,zoomMax:10,dblClickZoom:!0,dblClickZoomTo:2},Ie={displaying:{type:Boolean,default:void 0},applyingPreviewStyles:{type:Boolean,default:void 0},isAnimating:{type:Boolean,default:void 0},src:{type:String,required:!0},alt:String,width:[String,Number],height:[String,Number],duration:{type:Number,default:x.duration},maskBgColor:{type:String,default:x.maskBgColor},maskOpacity:{type:Number,default:x.maskOpacity},previewZIndex:{type:Number,default:x.previewZIndex},previewMaxWidth:{type:[String,Number],default:x.previewMaxWidth},previewMaxHeight:{type:[String,Number],default:x.previewMaxHeight},zoomStep:{type:Number,default:x.zoomStep},zoomMin:{type:Number,default:x.zoomMin},zoomMax:{type:Number,default:x.zoomMax},dblClickZoom:{type:Boolean,default:x.dblClickZoom},dblClickZoomTo:{type:Number,default:x.dblClickZoomTo}},Be={"update:displaying":o=>!0,"update:applyingPreviewStyles":o=>!0,"update:isAnimating":o=>!0,displayChange:o=>!0,previewStylesChange:o=>!0,animatingChange:o=>!0},Oe=["src"],$e={style:{display:"flex","flex-direction":"column","align-items":"center",gap:"0.5rem"}},Ye=["src","alt"],We={key:0,style:{"font-size":"0.8rem",color:"#666"}},be=ve({name:"HanaImgViewer",__name:"HanaImgViewer",props:Ie,emits:Be,setup(o,{emit:t}){let e=o,n=t,l=m(!1);O(()=>{l.value=!0});let v=m(null),h=m(null),r=m(null),L=m(!1),i=m(!1),c=m(!1),d=g({get:()=>e.displaying!==void 0?e.displaying:L.value,set:a=>{e.displaying!==void 0?n("update:displaying",a):L.value=a,n("displayChange",a)}}),p=g({get:()=>e.applyingPreviewStyles!==void 0?e.applyingPreviewStyles:i.value,set:a=>{e.applyingPreviewStyles!==void 0?n("update:applyingPreviewStyles",a):i.value=a,n("previewStylesChange",a)}}),y=g({get:()=>e.isAnimating!==void 0?e.isAnimating:c.value,set:a=>{e.isAnimating!==void 0?n("update:isAnimating",a):c.value=a,n("animatingChange",a)}});Y(()=>e.displaying,a=>{a!==void 0&&a!==L.value&&(L.value=a)}),Y(()=>e.applyingPreviewStyles,a=>{a!==void 0&&a!==i.value&&(i.value=a)}),Y(()=>e.isAnimating,a=>{a!==void 0&&a!==c.value&&(c.value=a)});function T(){y.value=!0,setTimeout(()=>{y.value=!1},e.duration)}let C=g(()=>({width:(typeof e.width=="number"?`${e.width}px`:e.width)??"fit-content",height:(typeof e.height=="number"?`${e.height}px`:e.height)??"fit-content",visibility:d.value?"hidden":"visible"}));function S(){y.value||(T(),d.value?(p.value=!1,setTimeout(()=>{d.value=!1},e.duration)):d.value=!0)}let f=ue(null);O(()=>{f.value=ze(r,e)}),pe(()=>{f.value?.cleanupListeners()});let b=m({}),{rect:w}=Ce(v,{throttle:!0,throttleDelay:100}),k=g(()=>w.value?w.value.width/w.value.height:0),{width:M,height:q,scrollX:B,scrollY:N}=De(),H=g(()=>M.value/q.value),X=g(()=>`${e.duration}ms`),Z=g(()=>w.value&&k.value>H.value?`${w.value.width}px`:"auto"),s=g(()=>w.value?k.value>H.value?"auto":`${w.value.height}px`:"auto"),u=g(()=>w.value?`${w.value.top+N.value}px`:"0px"),E=g(()=>w.value?`${w.value.left+B.value}px`:"0px"),z=g(()=>k.value>H.value?`${e.previewMaxWidth}`:"auto"),j=g(()=>k.value>H.value?"auto":`${e.previewMaxHeight}`),Se=g(()=>`calc(50vh + ${N.value}px)`);function ke(a){a.key==="Escape"&&d.value&&S()}let R=m({toggleEventListener:a=>{}});$(()=>{f.value&&(R.value=He({handleWheel:f.value.handleWheel,handleTouchStart:f.value.handleTouchStart,handleKeyDown:ke}))});let xe=g(()=>({opacity:p.value?e.maskOpacity:0})),Me=g(()=>({transition:y.value?`all ${X.value}`:"none",width:p.value?z.value:Z.value,height:p.value?j.value:s.value,top:p.value?Se.value:u.value,left:p.value?"50%":E.value,transform:p.value?"translate(-50%, -50%)":"none"}));return $(()=>{f.value?.initTransformer(),d.value?(typeof document<"u"&&(document.body.style.overflow="hidden"),requestAnimationFrame(()=>{p.value=!0})):typeof document<"u"&&(document.body.style.overflow="auto")}),Y([d,y],([a,F],[oe,ne])=>{if(!f.value)return;let Te=a&&!F&&oe&&ne&&p.value,qe=a&&F&&oe&&!ne;Te&&(b.value={dblclick:f.value.handleDblclick,mousedown:f.value.handleMouseDown},R.value.toggleEventListener("on")),qe&&(R.value.toggleEventListener("off"),b.value={})}),(a,F)=>(A(),W(he,null,[l.value?(A(),te(ee,{key:0,to:"body"},[d.value?(A(),W("div",{key:0,ref_key:"maskRef",ref:h,style:Q({position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:a.maskBgColor,zIndex:a.previewZIndex-1,transition:`all ${X.value}`,opacity:xe.value.opacity}),onClick:S},null,4)):I("",!0)])):I("",!0),l.value?(A(),te(ee,{key:1,to:"body"},[d.value?(A(),W("img",fe({key:0,ref_key:"previewerRef",ref:r,src:a.src,draggable:"false",style:{position:"absolute",objectFit:"cover",cursor:"grab",zIndex:a.previewZIndex,...Me.value}},me(b.value,!0)),null,16,Oe)):I("",!0)])):I("",!0),P("div",$e,[P("div",{style:Q(C.value)},[P("img",{ref_key:"imgRef",ref:v,src:a.src,alt:a.alt,style:{width:"100%",height:"100%","object-fit":"cover",cursor:"pointer"},onClick:S},null,8,Ye)],4),a.alt?(A(),W("span",We,ce(a.alt),1)):I("",!0)])],64))}});var Ee=o=>{document.querySelectorAll(`${o} .md img:not(.emoji):not(.vemoji)`).forEach(t=>{let e=t,n=e.src,l=document.createElement("div");e.replaceWith(l),ge(be,{src:n,maskOpacity:.8}).mount(l)})};var Qe=()=>{if(!document.querySelector(".md"))return;Ee(".post.block"),document.querySelector(".post.block").oncopy=t=>{if(J(LOCAL.copyright),LOCAL.nocopy){t.preventDefault();return}let e=document.getElementById("copyright");if(window.getSelection().toString().length>ae.experiments.copyrightLength&&e){t.preventDefault();let n="# "+e.querySelector(".author").innerText,l="# "+e.querySelector(".link").innerText,v="# "+e.querySelector(".license").innerText,h=n+"<br>"+l+"<br>"+v+"<br><br>"+window.getSelection().toString().replace(/\r\n/g,"<br>"),r=n+`
`+l+`
`+v+`

`+window.getSelection().toString().replace(/\r\n/g,`
`);if(t.clipboardData)t.clipboardData.setData("text/html",h),t.clipboardData.setData("text/plain",r);else throw new Error("Clipboard API not supported")}},document.querySelectorAll("li ruby").forEach(t=>{let e=t.parentNode;t.parentNode.tagName!=="LI"&&(e=t.parentNode.parentNode),e.classList.add("ruby")}),document.querySelectorAll("ol[start]").forEach(t=>{t.style.counterReset="counter "+parseInt(t.getAttribute("start")-1)}),document.querySelectorAll(".md table").forEach(t=>{le(t,{className:"table-container"})}),document.querySelectorAll(".highlight > .table-container").forEach(t=>{t.className="code-container"}),document.querySelectorAll("figure.highlight").forEach(t=>{let e=t.querySelector(".code-container"),n=t.querySelector("figcaption");t.insertAdjacentHTML("beforeend",'<div class="operation"><span class="breakline-btn"><i class="ic i-align-left"></i></span><span class="copy-btn"><i class="ic i-clipboard"></i></span><span class="fullscreen-btn"><i class="ic i-expand"></i></span></div>');let l=t.querySelector(".copy-btn");LOCAL.nocopy?l.remove():(l.addEventListener("click",i=>{let c=i.currentTarget,d="",p="";e.querySelectorAll("pre").forEach(y=>{p+=d+y.innerText,d=`
`}),se(p,y=>{c.querySelector(".ic").className=y?"ic i-check":"ic i-times",c.blur(),J(LOCAL.copyright)})},{passive:!0}),l.addEventListener("mouseleave",i=>{setTimeout(()=>{i.target.querySelector(".ic").className="ic i-clipboard"},1e3)})),t.querySelector(".breakline-btn").addEventListener("click",i=>{let c=i.currentTarget;t.classList.contains("breakline")?(t.classList.remove("breakline"),c.querySelector(".ic").className="ic i-align-left"):(t.classList.add("breakline"),c.querySelector(".ic").className="ic i-align-justify")});let h=t.querySelector(".fullscreen-btn"),r=()=>{t.classList.remove("fullscreen"),t.scrollTop=0,G.classList.remove("fullscreen"),h.querySelector(".ic").className="ic i-expand"},L=()=>{if(t.classList.contains("fullscreen")){if(r(),e&&e.querySelectorAll("tr").length>15){let i=e.querySelector(".show-btn");e.style.maxHeight="300px",i.classList.remove("open")}U(t)}else if(t.classList.add("fullscreen"),G.classList.add("fullscreen"),h.querySelector(".ic").className="ic i-compress",e&&e.querySelectorAll("tr").length>15){let i=e.querySelector(".show-btn");e.style.maxHeight="",i.classList.add("open")}};if(h.addEventListener("click",L),n&&n.addEventListener("click",L),e&&e.querySelectorAll("tr").length>15){e.style.maxHeight="300px",e.insertAdjacentHTML("beforeend",'<div class="show-btn"><i class="ic i-angle-down"></i></div>');let i=e.querySelector(".show-btn"),c=()=>{e.style.maxHeight="300px",i.classList.remove("open")},d=()=>{e.style.maxHeight="",i.classList.add("open")};i.addEventListener("click",()=>{i.classList.contains("open")?(r(),c(),U(e)):d()})}}),document.querySelectorAll("pre.mermaid > svg").forEach(t=>{let e=t;e.style.maxWidth=""}),document.querySelectorAll(".reward button").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();let n=document.getElementById("qr");ie(n)==="inline-flex"?K(n,0):K(n,1,()=>{re(n,"inline-flex")})})}),document.querySelectorAll(".quiz > ul.options li").forEach(t=>{t.addEventListener("click",()=>{t.classList.contains("correct")?(t.classList.toggle("right"),t.parentNode.parentNode.classList.add("show")):t.classList.toggle("wrong")})}),document.querySelectorAll(".quiz > p").forEach(t=>{t.addEventListener("click",()=>{t.parentNode.classList.toggle("show")})}),document.querySelectorAll(".quiz > p:first-child").forEach(t=>{let e=t.parentNode,n="choice";(e.classList.contains("true")||e.classList.contains("false"))&&(n="true_false"),e.classList.contains("multi")&&(n="multiple"),e.classList.contains("fill")&&(n="gap_fill"),e.classList.contains("essay")&&(n="essay"),t.setAttribute("data-type",LOCAL.quiz[n])}),document.querySelectorAll(".quiz .mistake").forEach(t=>{t.setAttribute("data-type",LOCAL.quiz.mistake)}),document.querySelectorAll("div.tags a").forEach(t=>{t.className=["primary","success","info","warning","danger"][Math.floor(Math.random()*5)]});let o=document.querySelectorAll(".show-btn .i-angle-down");if(o.length){let t=new IntersectionObserver(e=>{e.forEach(n=>{n.isIntersecting?o.forEach(l=>{l.classList.remove("stop-animation")}):o.forEach(l=>{l.classList.add("stop-animation")})})},{root:null,threshold:.5});o.forEach(e=>{t.observe(e)})}};export{Qe as postBeauty};
